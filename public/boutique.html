<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="D√©couvrez notre atelier-boutique √† Saint-P√©e-sur-Nivelle o√π cr√©ations en bois et bijoux en pierres naturelles se rencontrent.">
  <title>La Boutique - Le petit bout de bois</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700;900&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Header avec enseigne suspendue -->
  <header>
    <div class="site-title">
      <span class="nail"></span>
      <span class="nail"></span>
      <h1>Le petit bout de bois</h1>
    </div>
    <p class="site-subtitle">Cr√©ations artisanales en bois par Jean-Michel Nougu√©-Lecocq</p>
  </header>

  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="/">Accueil</a></li>
      <li><a href="/catalogue">Catalogue</a></li>
      <li><a href="/panier">Panier <span id="cart-count">(0)</span></a></li>
      <li><a href="/contact">Contact</a></li>
      <li><a href="/boutique" style="background: linear-gradient(135deg, #8B4513, #A0522D); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600; transition: transform 0.3s ease, box-shadow 0.3s ease; border: 2px solid #D2691E;" onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 4px 15px rgba(139, 69, 19, 0.5)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none'">üè° La Boutique</a></li>
    </ul>
  </nav>

  <!-- Conteneur principal -->
  <div class="container page-transition">
    <!-- Section h√©ro -->
    <section class="hero-section" style="text-align: center; margin: 3rem 0;">
      <h2 style="font-size: 2.5rem; color: var(--wood-dark); margin-bottom: 1rem;">
        üè° Notre Atelier-Boutique √† Saint-P√©e-sur-Nivelle
      </h2>
      <p style="font-size: 1.2rem; color: var(--wood-medium); max-width: 700px; margin: 0 auto; line-height: 1.8;">
        L√† o√π le bois s'accorde aux perles
      </p>
    </section>

    <!-- Introduction -->
    <section style="margin: 3rem 0;">
      <div style="background: white; border-radius: 12px; padding: 2.5rem; box-shadow: var(--shadow-medium); border: 3px solid var(--wood-light);">
        <h3 style="text-align: center; font-size: 2rem; color: var(--wood-dark); margin-bottom: 2rem;">
          Un Lieu, Deux Univers, Une Harmonie
        </h3>
        <div style="max-width: 800px; margin: 0 auto; line-height: 1.8; color: var(--slate-gray);">
          <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
            Nich√©e au c≈ìur de Saint-P√©e-sur-Nivelle, notre boutique-atelier est bien plus qu'un simple commerce.
            C'est un espace de rencontre entre deux passions, deux savoir-faire qui dialoguent naturellement :
            les cr√©ations en bois de Jean-Michel et les bijoux en pierres naturelles d'Yvonne.
          </p>
          <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
            D√®s que vous franchissez la porte, vous entrez dans un univers o√π chaque essence de bois raconte une histoire,
            o√π chaque pierre respire l'authenticit√©. Les porte-bijoux en ch√™ne massif c√¥toient les bracelets d'am√©thyste,
            les cr√©ations sculpt√©es √† la main accueillent les colliers de quartz rose.
          </p>
          <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
            Nous prenons le temps de vous accueillir, de comprendre vos envies, de vous conseiller avec passion.
            Ici, chaque pi√®ce est unique, fabriqu√©e avec soin dans notre atelier. Vous pourrez m√™me
            assister √† la naissance d'une cr√©ation, sentir le parfum du bois fra√Æchement travaill√©,
            d√©couvrir l'√©clat d'une pierre que nous venons de recevoir.
          </p>
          <p style="font-size: 1.1rem;">
            Venez nous rendre visite. Prenez le temps de fl√¢ner, de toucher, de ressentir.
            Notre boutique est un havre de s√©r√©nit√© o√π l'artisanat authentique prend tout son sens.
          </p>
        </div>
      </div>
    </section>

    <!-- Collaboration -->
    <section style="margin: 3rem 0;">
      <div style="background: linear-gradient(135deg, rgba(186, 85, 211, 0.05), rgba(221, 160, 221, 0.05)); border-radius: 12px; padding: 2.5rem; box-shadow: var(--shadow-medium); border-left: 4px solid var(--wood-dark);">
        <h3 style="text-align: center; font-size: 2rem; color: var(--wood-dark); margin-bottom: 1.5rem;">
          ‚ú® La Magie de la Collaboration
        </h3>
        <p style="text-align: center; font-size: 1.2rem; line-height: 1.8; max-width: 700px; margin: 0 auto; color: var(--slate-gray); font-style: italic;">
          Sur une table en ch√™ne, un collier de perles nacr√©es. Sous un bracelet, un porte-bijou en bois.
          <br><br>
          Dans notre boutique, chaque cr√©ation trouve son √©cho dans l'autre univers.
          <br><br>
          Les courbes douces du bois accueillent l'√©clat des pierres. Les couleurs naturelles se r√©pondent,
          les mati√®res se compl√®tent. C'est cette harmonie que nous vous invitons √† d√©couvrir.
        </p>
        <div style="text-align: center; margin-top: 2rem;">
          <a href="http://localhost:3000" id="perlouze-link" class="btn btn-primary">
            üíé D√©couvrir les bijoux d'Yvonne ‚Üí
          </a>
        </div>
      </div>
    </section>

    <!-- Infos Pratiques -->
    <section style="margin: 3rem 0;">
      <h2 style="text-align: center; font-size: 2rem; color: var(--wood-dark); margin-bottom: 2rem;">
        üìç Infos Pratiques
      </h2>

      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
        <div style="background: white; border-radius: 12px; padding: 2rem; text-align: center; box-shadow: var(--shadow-medium); border: 3px solid var(--wood-light);">
          <div style="font-size: 3rem; margin-bottom: 1rem;">üìç</div>
          <h3 style="color: var(--wood-dark); margin-bottom: 1rem;">Adresse</h3>
          <p style="color: var(--slate-gray); line-height: 1.6;">
            121 Rue Legarreta<br>
            64310 Saint-P√©e-sur-Nivelle<br>
            Pays Basque
          </p>
        </div>

        <div style="background: white; border-radius: 12px; padding: 2rem; text-align: center; box-shadow: var(--shadow-medium); border: 3px solid var(--wood-light);">
          <div style="font-size: 3rem; margin-bottom: 1rem;">üïê</div>
          <h3 style="color: var(--wood-dark); margin-bottom: 1rem;">Horaires</h3>
          <p style="color: var(--slate-gray); line-height: 1.6;">
            Du mardi au samedi<br>
            10h √† 18h<br>
            <em style="font-size: 0.9rem; opacity: 0.8;">Ferm√© dimanche et lundi</em>
          </p>
        </div>

        <div style="background: white; border-radius: 12px; padding: 2rem; text-align: center; box-shadow: var(--shadow-medium); border: 3px solid var(--wood-light);">
          <div style="font-size: 3rem; margin-bottom: 1rem;">üìû</div>
          <h3 style="color: var(--wood-dark); margin-bottom: 1rem;">Contact</h3>
          <p style="color: var(--slate-gray); line-height: 1.6;">
            <a href="mailto:contact@petitboutdebois.fr" style="color: var(--wood-medium); text-decoration: none;">contact@petitboutdebois.fr</a><br>
            <a href="tel:+33559540000" style="color: var(--wood-medium); text-decoration: none;">05 59 54 00 00</a>
          </p>
        </div>
      </div>

      <!-- Google Maps -->
      <div style="background: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow-medium); border: 3px solid var(--wood-light);">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2900.903200081201!2d-1.5570571231795796!3d43.35813537111771!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd5116535759d119%3A0xf429d950a2e12970!2s121%20Rue%20Legarreta%2C%2064310%20Saint-P%C3%A9e-sur-Nivelle!5e0!3m2!1sfr!2sfr!4v1763147531317!5m2!1sfr!2sfr"
          width="100%"
          height="400"
          style="border:0;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </section>

    <!-- Galerie Photos -->
    <section style="margin: 3rem 0;">
      <h2 style="text-align: center; font-size: 2rem; color: var(--wood-dark); margin-bottom: 2rem;">
        ü™µ Notre Univers en Images
      </h2>

      <div id="gallery-grid" style="display: grid; gap: 2rem;">
        <!-- Les images seront charg√©es dynamiquement -->
      </div>

      <div id="show-more-container" style="text-align: center; margin-top: 2rem; display: none;">
        <button id="show-more-btn" class="btn btn-primary">
          Voir plus de photos
        </button>
      </div>

      <p id="no-images-message" style="text-align: center; margin-top: 2rem; color: var(--slate-gray); font-style: italic; display: none;">
        Aucune photo pour le moment. Venez d√©couvrir notre boutique en personne ! üì∏
      </p>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    <p><strong>Le petit bout de bois</strong> - Cr√©ations artisanales par Jean-Michel Nougu√©-Lecocq</p>
    <p>
      <a href="/contact">Contact</a> |
      <a href="/admin">Administration</a> |
      <a href="http://localhost:3000">La p'tite perlouze</a>
    </p>
    <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
      ¬© 2026 Le petit bout de bois - Fait avec passion ü™µ
    </p>
  </footer>

  <style>
    /* Galerie photos - 3 colonnes sur grand √©cran */
    #gallery-grid {
      grid-template-columns: 1fr;
    }

    @media (min-width: 768px) {
      #gallery-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      #gallery-grid {
        grid-template-columns: repeat(3, 1fr);
        max-width: 1200px;
        margin: 0 auto;
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    @keyframes zoomIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }
  </style>

  <!-- Scripts -->
  <script src="/js/main.js"></script>
  <script>
    // Charger les param√®tres du site pour le lien perlouze
    async function loadSiteSettings() {
      try {
        const response = await fetch('/api/settings');
        const settings = await response.json();

        if (settings.perlouze_url) {
          const perlouzeLink = document.getElementById('perlouze-link');
          if (perlouzeLink) {
            perlouzeLink.href = settings.perlouze_url;
          }
        }
      } catch (error) {
        console.error('Erreur lors du chargement des param√®tres:', error);
      }
    }

    // Charger les images de la boutique
    let allImages = [];
    let showingAll = false;
    const INITIAL_DISPLAY = 6;

    async function loadBoutiqueImages() {
      try {
        const response = await fetch('/api/boutique/images');
        allImages = await response.json();
        displayImages();
      } catch (error) {
        console.error('Erreur lors du chargement des images:', error);
        document.getElementById('no-images-message').style.display = 'block';
      }
    }

    function displayImages() {
      const galleryGrid = document.getElementById('gallery-grid');
      const showMoreContainer = document.getElementById('show-more-container');
      const noImagesMessage = document.getElementById('no-images-message');

      if (allImages.length === 0) {
        noImagesMessage.style.display = 'block';
        return;
      }

      const imagesToShow = showingAll ? allImages : allImages.slice(0, INITIAL_DISPLAY);

      galleryGrid.innerHTML = imagesToShow.map(img => `
        <div style="aspect-ratio: 1; overflow: hidden; cursor: pointer; background: white;
                    border-radius: 12px; padding: 1rem; box-shadow: var(--shadow-medium);
                    border: 3px solid var(--wood-light);"
             onclick="openImageModal('${img.image_path}')">
          <img src="${img.image_path}" alt="Boutique"
               style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; border-radius: 12px;"
               onmouseover="this.style.transform='scale(1.05)'"
               onmouseout="this.style.transform='scale(1)'">
        </div>
      `).join('');

      if (allImages.length > INITIAL_DISPLAY) {
        showMoreContainer.style.display = 'block';
        const btn = document.getElementById('show-more-btn');
        btn.textContent = showingAll ? 'Voir moins de photos' : 'Voir plus de photos';
      } else {
        showMoreContainer.style.display = 'none';
      }
    }

    function toggleShowMore() {
      showingAll = !showingAll;
      displayImages();
      if (!showingAll) {
        document.getElementById('gallery-grid').scrollIntoView({ behavior: 'smooth' });
      }
    }

    function openImageModal(imagePath) {
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        animation: fadeIn 0.3s ease;
      `;

      modal.innerHTML = `
        <img src="${imagePath}" alt="Boutique"
             style="max-width: 90%; max-height: 90%; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); animation: zoomIn 0.3s ease;">
      `;

      modal.onclick = () => {
        modal.style.animation = 'fadeOut 0.2s ease';
        setTimeout(() => modal.remove(), 200);
      };

      document.body.appendChild(modal);
    }

    // Mettre √† jour le compteur du panier
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart-bois') || '[]');
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const cartCountElement = document.getElementById('cart-count');
      if (cartCountElement) {
        cartCountElement.textContent = `(${totalItems})`;
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateCartCount();
      loadSiteSettings();
      loadBoutiqueImages();

      const showMoreBtn = document.getElementById('show-more-btn');
      if (showMoreBtn) {
        showMoreBtn.addEventListener('click', toggleShowMore);
      }
    });
  </script>
</body>
</html>
